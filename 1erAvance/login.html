<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - FanScore</title>
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- VUE.JS -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        .fade-out {
            animation: fadeOut 0.7s forwards;
        }
        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: scale(0.98);
            }
        }
        /* Estilos Vue */
        .loading {
            opacity: 0.7;
        }
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .error-message {
            color: #E5253B;
            font-size: 12px;
            margin-top: 5px;
            display: block;
        }
        .input-box input.error {
            border-color: #E5253B !important;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Efecto de partículas en el fondo -->
        <div class="particles" id="particles"></div>
        
        <div class="container" :class="{ 'loading': loading }">
            <!-- Panel izquierdo -->
            <div class="left">
                <div class="left-content">
                    <div class="logo">
                        <div class="logo-icon">
                            <img src="Images/fanscore.png" alt="FanScore Logo" style="height: 65px;">
                        </div>
                        <div class="logo-text">FanScore</div>
                    </div>
                    <h2>Vive la pasión del fútbol</h2>
                    <p>Únete a millones de aficionados en todo el mundo siguiendo partidos, estadísticas y más con FanScore.</p>
                </div>
            </div>
            
            <!-- Panel derecho -->
            <div class="right">
                <div class="right-content">
                    <div>
                        <h1>HOLA FIFA</h1>
                        <p>Bienvenido a la Experiencia FIFA 2026.</p>
                    </div>
                    
                    <!-- CAMPO EMAIL -->
                    <div class="input-box">
                        <input 
                            type="email" 
                            placeholder="Email" 
                            v-model="form.username"
                            @keyup.enter="handleLogin"
                            :class="{ 'error': formSubmitted && errors.username }"
                        >
                        <i class="fas fa-envelope"></i>
                    </div>
                    <!-- Mostrar error solo después de enviar -->
                    <small class="error-message" v-if="formSubmitted && errors.username">
                        {{ errors.username }}
                    </small>
                    <!-- Mostrar éxito solo después de enviar y si es válido -->
                    <small class="success-message" v-if="formSubmitted && form.username && !errors.username">
                        ✅ Email válido
                    </small>

                    <!-- CAMPO CONTRASEÑA -->
                    <div class="input-box">
                        <input 
                            type="password" 
                            placeholder="Contraseña" 
                            v-model="form.password"
                            @keyup.enter="handleLogin"
                            :class="{ 'error': formSubmitted && errors.password }"
                        >
                        <i class="fas fa-lock"></i>
                    </div>
                    <!-- Mostrar error solo después de enviar -->
                    <small class="error-message" v-if="formSubmitted && errors.password">
                        {{ errors.password }}
                    </small>
                    <!-- Mostrar éxito solo después de enviar y si es válido -->
                    <small class="success-message" v-if="formSubmitted && form.password && !errors.password">
                        ✅ Contraseña válida
                    </small>
                    
                    <div class="forgot">
                        <a href="#" @click.prevent="handleForgotPassword">
                            ¿Olvidaste tu contraseña?
                        </a>
                    </div>
                    
                    <!-- BOTÓN CON VUE -->
                    <button class="btn" @click="handleLogin" :disabled="loading">
                        <span v-if="loading">Iniciando sesión...</span>
                        <span v-else>Iniciar Sesión</span>
                    </button>
                    
                    <div class="divider">
                        <span>o continuar con</span>
                    </div>
                    
                    <!-- BOTÓN GOOGLE CON VUE -->
                    <button class="btn google-btn" @click="handleGoogleLogin">
                        <i class="fab fa-google google-icon"></i> Google
                    </button>
                    
                    <div class="signup">
                        ¿No tienes una cuenta? 
                        <a href="#" @click.prevent="goToRegister">
                            Regístrate ahora
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- NOTIFICACIÓN CON VUE -->
        <div class="notification" 
             :class="{ 'show': notification.show }" 
             :style="{ background: notification.isError ? '#E5253B' : '#009739' }">
            {{ notification.message }}
        </div>
    </div>

    <script>
        const { createApp, ref, reactive, onMounted } = Vue;

createApp({
    setup() {
        // ESTADO REACTIVO CON VUE
        const form = reactive({
            username: '',
            password: ''
        });
        
        const errors = reactive({});
        const loading = ref(false);
        const formSubmitted = ref(false); // Nuevo estado para controlar si se envió el formulario
        
        const notification = reactive({
            show: false,
            message: '',
            isError: false
        });
        
        // FUNCIÓN PARA VALIDAR EMAIL
        const isValidEmail = (email) => {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        };
        
        // MÉTODOS CON VUE
        const showNotification = (message, isError = false) => {
            notification.message = message;
            notification.isError = isError;
            notification.show = true;
            
            setTimeout(() => {
                notification.show = false;
            }, 3000);
        };
        
        const validateForm = () => {
            // Limpiar errores anteriores
            errors.username = '';
            errors.password = '';
            
            let isValid = true;
            
            // Validar usuario/email - SOLO EMAIL AHORA
            if (!form.username.trim()) {
                errors.username = 'Por favor ingresa tu email';
                isValid = false;
            } else if (!isValidEmail(form.username)) {
                errors.username = 'Por favor ingresa un email válido (ej: usuario@dominio.com)';
                isValid = false;
            }
            
            // Validar contraseña
            if (!form.password) {
                errors.password = 'Por favor ingresa tu contraseña';
                isValid = false;
            } else if (form.password.length < 4) {
                errors.password = 'La contraseña debe tener al menos 4 caracteres';
                isValid = false;
            }
            
            return isValid;
        };
        
        const handleLogin = async () => {
            // Marcar que el formulario fue enviado
            formSubmitted.value = true;
            
            // Validar el formulario
            const isValid = validateForm();
            
            if (!isValid) {
                // MOSTRAR NOTIFICACIÓN DE ERROR si la validación falla
                if (errors.username) {
                    showNotification('❌ Por favor ingresa un email válido', true);
                } else {
                    showNotification('❌ Por favor completa todos los campos correctamente', true);
                }
                return;
            }
            
            loading.value = true;
            
            try {
                // Simular llamada a API
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Simulación de inicio de sesión exitoso
                showNotification('✅ ¡Inicio de sesión exitoso! Redirigiendo...', false);
                
                // Aquí iría la redirección real
                // setTimeout(() => {
                //     window.location.href = 'dashboard.html';
                // }, 2000);
                
            } catch (error) {
                showNotification('❌ Error al iniciar sesión. Intenta nuevamente.', true);
            } finally {
                loading.value = false;
            }
        };
        
        const handleGoogleLogin = () => {
            showNotification('Inicio con Google en desarrollo', false);
        };
        
        const handleForgotPassword = () => {
            showNotification('Función de recuperación de contraseña en desarrollo', false);
        };
        
        const goToRegister = () => {
            document.body.classList.add('fade-out');
            setTimeout(() => {
                window.location.href = 'Registro.html';
            }, 650);
        };
        
        // PARTÍCULAS (código original adaptado)
        const createParticles = () => {
            const container = document.getElementById('particles');
            if (!container) return;
            
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                const size = Math.random() * 15 + 5;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                particle.style.left = `${posX}%`;
                particle.style.top = `${posY}%`;
                
                const opacity = Math.random() * 0.3 + 0.1;
                particle.style.background = `rgba(255, 255, 255, ${opacity})`;
                
                const delay = Math.random() * 5;
                particle.style.animationDelay = `${delay}s`;
                
                container.appendChild(particle);
            }
        };
        
        // INICIALIZAR CUANDO EL COMPONENTE ESTÉ LISTO
        onMounted(() => {
            createParticles();
        });
        
        // EXPONER AL TEMPLATE
        return {
            form,
            errors,
            loading,
            notification,
            formSubmitted, // Exponer el nuevo estado
            handleLogin,
            handleGoogleLogin,
            handleForgotPassword,
            goToRegister
        };
    }
}).mount('#app');
    </script>
</body>
</html>